import{r as d,_ as he,$ as je,j as e,a0 as be,a1 as F,a2 as K,a3 as fe,a4 as ve,a5 as L,y as ye,i as Ne,k as _e,h as se,C as z,d as R,B as E,b as D,a6 as O,K as Q,c as te,E as Ce,U as ke,T as we,s as ie,Z as Se,u as Ie,g as p,I as T,l as Ae,w as U,W as Ee,q as Te,N as ze,a7 as Re,a8 as qe}from"./index-CFf024ZK.js";import{S as H,a as W,b as J,c as X,d as P}from"./select-TuGEKTAh.js";import{u as De}from"./index-DBso7uT_.js";import{A as ae,a as re}from"./alert-BEZsf6Qv.js";import{P as Z}from"./progress-CJIi5AOi.js";import{u as Oe}from"./useQuery-DoXC3bd7.js";import{a as ne}from"./aiService-pihjpaVZ.js";import{R as G}from"./rotate-ccw-B5jk-TGF.js";import{T as Pe}from"./triangle-alert-BIo-zkYh.js";import{C as Me}from"./clock-x8Xa0ILG.js";import{a as Le,L as Y}from"./loader-circle-DoWjxNgE.js";import{T as Be}from"./text-completion-assistant-mwofZG2-.js";import{C as Fe}from"./circle-alert-CGQK5B97.js";import"./lightbulb-BlYaqzcI.js";var $="Checkbox",[$e,ps]=be($),[Ve,Ke]=$e($),le=d.forwardRef((r,m)=>{const{__scopeCheckbox:n,name:t,checked:g,defaultChecked:i,required:c,disabled:h,value:y="on",onCheckedChange:N,form:u,...a}=r,[f,_]=d.useState(null),k=he(m,j=>_(j)),o=d.useRef(!1),w=f?u||!!f.closest("form"):!0,[S=!1,q]=je({prop:g,defaultProp:i,onChange:N}),v=d.useRef(S);return d.useEffect(()=>{const j=f?.form;if(j){const A=()=>q(v.current);return j.addEventListener("reset",A),()=>j.removeEventListener("reset",A)}},[f,q]),e.jsxs(Ve,{scope:n,state:S,disabled:h,children:[e.jsx(F.button,{type:"button",role:"checkbox","aria-checked":I(S)?"mixed":S,"aria-required":c,"data-state":oe(S),"data-disabled":h?"":void 0,disabled:h,value:y,...a,ref:k,onKeyDown:K(r.onKeyDown,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:K(r.onClick,j=>{q(A=>I(A)?!0:!A),w&&(o.current=j.isPropagationStopped(),o.current||j.stopPropagation())})}),w&&e.jsx(Qe,{control:f,bubbles:!o.current,name:t,value:y,checked:S,required:c,disabled:h,form:u,style:{transform:"translateX(-100%)"},defaultChecked:I(i)?!1:i})]})});le.displayName=$;var ce="CheckboxIndicator",de=d.forwardRef((r,m)=>{const{__scopeCheckbox:n,forceMount:t,...g}=r,i=Ke(ce,n);return e.jsx(fe,{present:t||I(i.state)||i.state===!0,children:e.jsx(F.span,{"data-state":oe(i.state),"data-disabled":i.disabled?"":void 0,...g,ref:m,style:{pointerEvents:"none",...r.style}})})});de.displayName=ce;var Qe=r=>{const{control:m,checked:n,bubbles:t=!0,defaultChecked:g,...i}=r,c=d.useRef(null),h=De(n),y=ve(m);d.useEffect(()=>{const u=c.current,a=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(a,"checked").set;if(h!==n&&_){const k=new Event("click",{bubbles:t});u.indeterminate=I(n),_.call(u,I(n)?!1:n),u.dispatchEvent(k)}},[h,n,t]);const N=d.useRef(I(n)?!1:n);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:g??N.current,...i,tabIndex:-1,ref:c,style:{...r.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function I(r){return r==="indeterminate"}function oe(r){return I(r)?"indeterminate":r?"checked":"unchecked"}var me=le,Ue=de;const M=d.forwardRef(({className:r,...m},n)=>e.jsx(me,{ref:n,className:L("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...m,children:e.jsx(Ue,{className:L("flex items-center justify-center text-current"),children:e.jsx(ye,{className:"h-4 w-4"})})}));M.displayName=me.displayName;var He="Separator",ee="horizontal",We=["horizontal","vertical"],ue=d.forwardRef((r,m)=>{const{decorative:n,orientation:t=ee,...g}=r,i=Je(t)?t:ee,h=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(F.div,{"data-orientation":i,...h,...g,ref:m})});ue.displayName=He;function Je(r){return We.includes(r)}var xe=ue;const B=d.forwardRef(({className:r,orientation:m="horizontal",decorative:n=!0,...t},g)=>e.jsx(xe,{ref:g,decorative:n,orientation:m,className:L("shrink-0 bg-border",m==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",r),...t}));B.displayName=xe.displayName;const Xe=r=>Oe({queryKey:["ai-analysis",r],queryFn:()=>ne.analyzeWithAI(r),enabled:!!(r.title&&r.description&&r.description.length>10),staleTime:300*1e3,cacheTime:600*1e3,refetchOnWindowFocus:!1,retry:2}),Ze=()=>{const r=Ne();return _e({mutationFn:ne.optimizeBrief,onSuccess:(m,n)=>{r.setQueryData(["brief-optimization",n],m)}})};function Ge({briefData:r,onEnhancementComplete:m,compact:n=!1}){const[t,g]=d.useState(!1),{toast:i}=se(),{data:c,isLoading:h,error:y,refetch:N}=Xe(r),u=Ze(),a=d.useMemo(()=>{if(!c?.qualityScore)return"bg-gray-500";const o=c.qualityScore;return o>=80?"bg-green-500":o>=60?"bg-yellow-500":"bg-red-500"},[c?.qualityScore]),f=d.useCallback(async()=>{try{const o=await u.mutateAsync(r);g(!0),m?.(o),i({title:"✨ Brief optimisé !",description:"Votre annonce a été améliorée par l'IA"})}catch{i({title:"Erreur d'optimisation",description:"Impossible d'optimiser le brief pour le moment",variant:"destructive"})}},[r,u,m,i]),_=d.useCallback(()=>{u.data?.optimizedText&&(navigator.clipboard.writeText(u.data.optimizedText),i({title:"Texte copié",description:"Le texte optimisé a été copié dans le presse-papier"}))},[u.data,i]),k=d.useCallback(()=>{N()},[N]);return h?e.jsx(z,{className:"border-blue-200 bg-blue-50/50",children:e.jsxs(R,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{className:"w-5 h-5 text-blue-600 animate-spin"}),e.jsx("span",{className:"text-blue-700 font-medium",children:"Analyse IA en cours..."})]}),e.jsx(Z,{value:void 0,className:"mt-3 h-2"})]})}):y?e.jsxs(ae,{className:"border-orange-200 bg-orange-50",children:[e.jsx(Pe,{className:"h-4 w-4 text-orange-600"}),e.jsxs(re,{className:"text-orange-800",children:["Analyse IA temporairement indisponible.",e.jsx(E,{variant:"link",onClick:k,className:"p-0 ml-2 text-orange-600",children:"Réessayer"})]})]}):c?e.jsxs("div",{className:"space-y-4",children:[e.jsxs(z,{className:"border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[e.jsxs(D,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(O,{className:"flex items-center gap-2 text-blue-900",children:[e.jsx(Q,{className:"w-5 h-5"}),"Analyse IA"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(te,{variant:"secondary",className:"bg-white text-blue-700",children:["Score: ",c.qualityScore,"/100"]}),e.jsx(E,{variant:"ghost",size:"sm",onClick:k,children:e.jsx(G,{className:"w-4 h-4"})})]})]}),e.jsx(Z,{value:c.qualityScore,className:"h-2",style:{background:`linear-gradient(to right, ${a} 0%, ${a} ${c.qualityScore}%, #e5e7eb ${c.qualityScore}%)`}})]}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[c.price_suggested_med&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded-lg",children:[e.jsx(Ce,{className:"w-4 h-4 text-green-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Budget suggéré"}),e.jsxs("div",{className:"font-semibold",children:[c.price_suggested_med,"€"]})]})]}),c.delay_suggested_days&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded-lg",children:[e.jsx(Me,{className:"w-4 h-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Délai suggéré"}),e.jsxs("div",{className:"font-semibold",children:[c.delay_suggested_days,"j"]})]})]}),c.detectedSkills?.length>0&&e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded-lg",children:[e.jsx(ke,{className:"w-4 h-4 text-purple-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Compétences"}),e.jsx("div",{className:"font-semibold",children:c.detectedSkills.length})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded-lg",children:[e.jsx(we,{className:"w-4 h-4 text-orange-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Complexité"}),e.jsx("div",{className:"font-semibold capitalize",children:c.estimatedComplexity})]})]})]}),c.improvements?.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-blue-900 mb-2 flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),"Améliorations suggérées"]}),e.jsx("div",{className:"space-y-1",children:c.improvements.slice(0,n?3:5).map((o,w)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx("div",{className:"w-1 h-1 rounded-full bg-blue-600 mt-2 flex-shrink-0"}),e.jsx("span",{children:o})]},w))})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[e.jsxs(E,{onClick:f,disabled:u.isPending,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),u.isPending?"Optimisation...":"Optimiser avec IA"]}),u.data&&e.jsxs(E,{variant:"outline",size:"sm",onClick:_,children:[e.jsx(Le,{className:"w-4 h-4 mr-2"}),"Copier le texte optimisé"]})]})]})]}),u.data&&t&&e.jsxs(z,{className:"border-green-200 bg-green-50/50",children:[e.jsx(D,{children:e.jsxs(O,{className:"flex items-center gap-2 text-green-900",children:[e.jsx(Q,{className:"w-5 h-5"}),"Texte optimisé par IA"]})}),e.jsx(R,{children:e.jsx("div",{className:"bg-white p-4 rounded-lg border text-sm whitespace-pre-wrap",children:u.data.optimizedText})})]})]}):null}const Ye=["développement","design","marketing","conseil","travaux","services"];function gs(){const[r,m]=Ie(),{toast:n}=se(),[t,g]=d.useState({title:"",description:"",category:"",budget_min:1e3,budget_max:5e3,geo_required:!1}),[i,c]=d.useState({}),[h,y]=d.useState(!1),[N,u]=d.useState(!1),[a,f]=d.useState(null),[_,k]=d.useState({}),[o,w]=d.useState({text:!1,budget:"",delay:!1}),[S,q]=d.useState({});d.useEffect(()=>{const s=new URLSearchParams(window.location.search),l=s.get("title"),x=s.get("description"),b=s.get("budget");(l||x||b)&&g(C=>({...C,...l&&{title:l},...x&&{description:x},...b&&{budget_max:parseInt(b)||C.budget_max}}))},[]);const v=(s,l)=>{g(x=>({...x,[s]:l})),i[s]&&c(x=>({...x,[s]:""}))},j=()=>{const s={};return t.title.length<3&&(s.title="Le titre doit contenir au moins 3 caractères"),t.description.length<10&&(s.description="La description doit contenir au moins 10 caractères"),t.category||(s.category="Veuillez sélectionner une catégorie"),t.budget_min<1e3&&(s.budget_min="Le budget minimum doit être d'au moins 1000€"),t.budget_max<t.budget_min&&(s.budget_max="Le budget maximum doit être supérieur au minimum"),t.geo_required&&(!t.onsite_radius_km||t.onsite_radius_km<0)&&(s.onsite_radius_km="Veuillez spécifier le rayon d'intervention"),c(s),Object.keys(s).length===0},A=async()=>{if(!t.title||!t.description){n({title:"Informations manquantes",description:"Veuillez remplir au moins le titre et la description pour obtenir des suggestions IA",variant:"destructive"});return}u(!0);try{const s=await fetch("/api/ai/missions/suggest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error("Erreur lors de la génération des suggestions");const l=await s.json();f(l.suggestion),n({title:"Suggestions IA générées",description:"L'IA a analysé votre mission et propose des améliorations"})}catch{n({title:"Erreur",description:"Impossible de générer les suggestions IA",variant:"destructive"})}finally{u(!1)}},pe=()=>{if(!a)return;const s={},l={};if(o.text&&(s.title=a.title,s.description=a.summary,l.title=a.title,l.description=a.summary),o.budget&&o.budget!==""){const b={min:a.price_suggested_min,med:a.price_suggested_med,max:a.price_suggested_max}[o.budget];b&&(s.budget_min=Math.round(b*.8),s.budget_max=b,l.budget_min=s.budget_min,l.budget_max=s.budget_max)}if(o.delay&&a.delay_suggested_days){const x=new Date;x.setDate(x.getDate()+a.delay_suggested_days),s.deadline_ts=x.toISOString().split("T")[0],l.deadline_ts=s.deadline_ts}g(x=>({...x,...s})),q(x=>({...x,...l})),n({title:"Suggestions appliquées",description:"Les suggestions IA ont été appliquées au formulaire"})},ge=async s=>{if(s.preventDefault(),!j()){n({title:"Erreurs de validation",description:"Veuillez corriger les erreurs dans le formulaire",variant:"destructive"});return}y(!0);try{const l=`mission-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,x={...t,missing_info_answers:_,applied_ai_suggestion:a?{applied_settings:o,suggestion:a,applied_patches:S}:null},b=await fetch("/api/missions",{method:"POST",headers:{"Content-Type":"application/json","Idempotency-Key":l},body:JSON.stringify(x)}),C=await b.json();if(!b.ok){if(b.status===422){c({[C.field]:C.message}),n({title:"Erreur de validation",description:C.message,variant:"destructive"});return}throw new Error(C.message||"Erreur lors de la création")}n({title:"Mission créée avec succès",description:`Mission "${t.title}" créée et publiée`}),C.id?m(paths.missionDetail(C.id)):m(paths.missions)}catch{n({title:"Erreur",description:"Une erreur est survenue lors de la création de la mission",variant:"destructive"})}finally{y(!1)}},V=s=>s>=.8?"text-green-600":s>=.6?"text-orange-600":"text-red-600";return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Créer une nouvelle mission"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Décrivez votre projet et obtenez des suggestions d'amélioration avec l'IA"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs(z,{children:[e.jsx(D,{children:e.jsx(O,{children:"Informations de la mission"})}),e.jsx(R,{className:"space-y-4",children:e.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"title",children:"Titre de la mission *"}),e.jsx(T,{id:"title",value:t.title,onChange:s=>v("title",s.target.value),placeholder:"Ex: Développement d'un site e-commerce",className:i.title?"border-red-500":""}),i.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.title})]}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{htmlFor:"description",children:"Description détaillée *"}),e.jsx(Ae,{id:"description",value:t.description,onChange:s=>v("description",s.target.value),placeholder:"Décrivez votre projet en détail...",rows:6,className:i.description?"border-red-500":""}),e.jsx(Be,{inputValue:t.description,onSuggestionApply:s=>g(l=>({...l,description:s})),context:{field:"project_description",category:"project",placeholder:"Description de mission"}}),i.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.description})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"category",children:"Catégorie *"}),e.jsxs(H,{value:t.category,onValueChange:s=>v("category",s),children:[e.jsx(W,{className:i.category?"border-red-500":"",children:e.jsx(J,{placeholder:"Sélectionnez une catégorie"})}),e.jsx(X,{children:Ye.map(s=>e.jsx(P,{value:s,children:s},s))})]}),i.category&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.category})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"budget_min",children:"Budget minimum (€) *"}),e.jsx(T,{id:"budget_min",type:"number",value:t.budget_min,onChange:s=>v("budget_min",parseInt(s.target.value)||0),min:"1000",step:"100",className:i.budget_min?"border-red-500":""}),i.budget_min&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.budget_min})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"budget_max",children:"Budget maximum (€) *"}),e.jsx(T,{id:"budget_max",type:"number",value:t.budget_max,onChange:s=>v("budget_max",parseInt(s.target.value)||0),min:"1000",step:"100",className:i.budget_max?"border-red-500":""}),i.budget_max&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.budget_max})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"deadline",children:"Échéance souhaitée"}),e.jsx(T,{id:"deadline",type:"date",value:t.deadline_ts||"",onChange:s=>v("deadline_ts",s.target.value),min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:"geo_required",checked:t.geo_required,onCheckedChange:s=>v("geo_required",s!=="indeterminate"?s:!1)}),e.jsx(p,{htmlFor:"geo_required",children:"Intervention sur site requise"})]}),t.geo_required&&e.jsxs("div",{children:[e.jsx(p,{htmlFor:"radius",children:"Rayon d'intervention (km)"}),e.jsx(T,{id:"radius",type:"number",value:t.onsite_radius_km||"",onChange:s=>v("onsite_radius_km",parseInt(s.target.value)||0),min:"0",placeholder:"50",className:i.onsite_radius_km?"border-red-500":""}),i.onsite_radius_km&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.onsite_radius_km})]}),e.jsx(B,{}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs(E,{type:"button",variant:"outline",onClick:A,disabled:N||!t.title||!t.description,className:"flex-1",children:[N?e.jsx(Y,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(U,{className:"mr-2 h-4 w-4"}),"Améliorer avec l'IA"]}),e.jsxs(E,{type:"submit",disabled:h,className:"flex-1",children:[h?e.jsx(Y,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Créer la mission"]})]})]})})]})}),e.jsx("div",{className:"space-y-6",children:a?e.jsxs(z,{children:[e.jsx(D,{children:e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-5 w-5 text-blue-500"}),"Suggestions IA"]})}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:`text-2xl font-bold ${V(a.brief_quality_score)}`,children:[Math.round(a.brief_quality_score*100),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Qualité du brief"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:`text-2xl font-bold ${V(a.richness_score)}`,children:[Math.round(a.richness_score*100),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Richesse du contenu"})]})]}),e.jsxs("div",{children:[e.jsx(p,{children:"Titre amélioré"}),e.jsx("div",{className:"p-3 bg-blue-50 rounded border",children:a.title})]}),e.jsxs("div",{children:[e.jsx(p,{children:"Résumé structuré"}),e.jsx("div",{className:"p-3 bg-blue-50 rounded border text-sm",children:a.summary})]}),e.jsxs("div",{children:[e.jsx(p,{children:"Suggestions de prix"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[e.jsxs("div",{className:"text-center p-2 bg-green-50 rounded",children:[e.jsxs("div",{className:"font-semibold text-green-700",children:[a.price_suggested_min,"€"]}),e.jsx("div",{className:"text-xs text-green-600",children:"Minimum"})]}),e.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded",children:[e.jsxs("div",{className:"font-semibold text-blue-700",children:[a.price_suggested_med,"€"]}),e.jsx("div",{className:"text-xs text-blue-600",children:"Médian"})]}),e.jsxs("div",{className:"text-center p-2 bg-orange-50 rounded",children:[e.jsxs("div",{className:"font-semibold text-orange-700",children:[a.price_suggested_max,"€"]}),e.jsx("div",{className:"text-xs text-orange-600",children:"Maximum"})]})]})]}),e.jsxs("div",{children:[e.jsx(p,{children:"Délai suggéré"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(Te,{className:"h-4 w-4 text-gray-500"}),e.jsxs("span",{children:[a.delay_suggested_days," jours"]})]})]}),a.skills_std.length>0&&e.jsxs("div",{children:[e.jsx(p,{children:"Compétences identifiées"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:a.skills_std.slice(0,6).map(s=>e.jsx(te,{variant:"secondary",className:"text-xs",children:s},s))})]}),a.missing_info.length>0&&e.jsxs("div",{children:[e.jsx(p,{children:"Questions pour améliorer le brief"}),e.jsx("div",{className:"space-y-2 mt-2",children:a.missing_info.slice(0,3).map(s=>e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-700",children:s.q}),e.jsx(T,{placeholder:"Votre réponse...",value:_[s.id]||"",onChange:l=>k(x=>({...x,[s.id]:l.target.value})),className:"mt-1"})]},s.id))})]}),e.jsx(B,{}),e.jsxs("div",{children:[e.jsx(p,{children:"Appliquer les suggestions"}),e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:"apply-text",checked:o.text,onCheckedChange:s=>w(l=>({...l,text:!!s}))}),e.jsx(p,{htmlFor:"apply-text",className:"text-sm",children:"Titre et résumé"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:"apply-delay",checked:o.delay,onCheckedChange:s=>w(l=>({...l,delay:!!s}))}),e.jsx(p,{htmlFor:"apply-delay",className:"text-sm",children:"Délai suggéré"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{className:"text-sm",children:"Budget suggéré"}),e.jsxs(H,{value:o.budget,onValueChange:s=>w(l=>({...l,budget:s})),children:[e.jsx(W,{className:"h-8",children:e.jsx(J,{placeholder:"Choisir un budget"})}),e.jsxs(X,{children:[e.jsxs(P,{value:"min",children:["Minimum (",a.price_suggested_min,"€)"]}),e.jsxs(P,{value:"med",children:["Médian (",a.price_suggested_med,"€)"]}),e.jsxs(P,{value:"max",children:["Maximum (",a.price_suggested_max,"€)"]})]})]})]})]}),e.jsxs(E,{onClick:pe,className:"w-full mt-4",disabled:!o.text&&!o.delay&&!o.budget,children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),"Appliquer les suggestions"]})]}),a.reasons.length>0&&e.jsxs(ae,{children:[e.jsx(Fe,{className:"h-4 w-4"}),e.jsx(re,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Recommandations :"}),e.jsx("ul",{className:"list-disc list-inside mt-1",children:a.reasons.slice(0,3).map((s,l)=>e.jsx("li",{children:s},l))})]})})]})]})]}):e.jsxs(z,{children:[e.jsxs(D,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5"}),"Description du projet"]}),e.jsx(Re,{children:"Décrivez précisément votre besoin pour attirer les bons prestataires"})]}),e.jsxs(R,{className:"text-center py-8",children:[e.jsx(U,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"IA d'amélioration de mission"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Remplissez le titre et la description pour obtenir des suggestions d'amélioration personnalisées"}),e.jsxs("ul",{className:"text-sm text-gray-500 space-y-1",children:[e.jsx("li",{children:"• Réécriture et structuration automatique"}),e.jsx("li",{children:"• Suggestions de prix basées sur le marché"}),e.jsx("li",{children:"• Questions pour compléter le brief"}),e.jsx("li",{children:"• Estimation de délais réalistes"})]})]})]})}),t.title&&t.description&&t.description.length>20&&e.jsx(qe.Suspense,{fallback:e.jsx("div",{className:"text-center py-8",children:"Chargement des suggestions IA..."}),children:e.jsx(Ge,{briefData:{title:t.title,description:t.description,category:t.category},onEnhancementComplete:s=>{console.log("Enhancements received:",s)}})})]})]})})}export{gs as default};
