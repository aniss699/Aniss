import{r as p,j as e,C as j,b as N,a6 as b,w as B,d as v,c as y,x as ie,s as te,Z as ae,T as _,N as J,E as pe,U as ge,I as je,B as re}from"./index-CFf024ZK.js";import{T as xe,a as ue,b as X,c as Y}from"./tabs-Bv7z5eAA.js";import{P as D}from"./progress-CJIi5AOi.js";import{A as ne,S as ee}from"./shield-uFLuLzjy.js";import{T as de}from"./triangle-alert-BIo-zkYh.js";import{C as ce}from"./clock-x8Xa0ILG.js";import{S as me}from"./star-DjEFJ45-.js";import{A as le,a as oe}from"./alert-BEZsf6Qv.js";import{T as ve,N as fe}from"./trending-down-BDlmoNsK.js";import{L as Ne}from"./lightbulb-BlYaqzcI.js";function be({bidData:m,onScoreCalculated:w}){const[T,f]=p.useState([]),[u,E]=p.useState(0),[A,I]=p.useState(!1),[x,g]=p.useState(0),[R,k]=p.useState([]),P=async()=>{I(!0),await new Promise(K=>setTimeout(K,2e3));const{price:n,timeline:d,provider:t,mission:i}=m,s=F(n,i.budget,i.complexity),r=q(t),a=M(t.skills,i.requiredSkills,t.location),c=S(d,i.urgency,t.responseTime),l=z(t,i),o=V(t,i,n),h=[{criterion:"price",score:s.score,weight:.25,explanation:s.explanation,factors:s.factors,recommendation:s.recommendation},{criterion:"quality",score:r.score,weight:.2,explanation:r.explanation,factors:r.factors,recommendation:r.recommendation},{criterion:"fit",score:a.score,weight:.2,explanation:a.explanation,factors:a.factors,recommendation:a.recommendation},{criterion:"delay",score:c.score,weight:.15,explanation:c.explanation,factors:c.factors,recommendation:c.recommendation},{criterion:"risk",score:l.score,weight:.1,explanation:l.explanation,factors:l.factors,recommendation:l.recommendation},{criterion:"completionProbability",score:o.score,weight:.1,explanation:o.explanation,factors:o.factors,recommendation:o.recommendation}],C=h.reduce((K,H)=>K+H.score*H.weight,0),O=G(h,t),se=U(h,m);f(h),E(Math.round(C)),g(O),k(se),I(!1),w?.(Math.round(C),h)},F=(n,d,t)=>{const i=n/d,s={low:.8,medium:1,high:1.2}[t]||1,r=i/s;let a=70,c="";const l=[];let o="";return r<.4?(a=25,c="Prix dangereusement bas - risque de dumping",l.push("Prix 60% en dessous du budget"),l.push("Possible sous-estimation du travail"),o="Vérifier la faisabilité avec ce budget"):r<.7?(a=90,c="Prix très compétitif et attractif",l.push("Excellent rapport qualité-prix"),l.push("Économies substantielles"),o="Offre très intéressante à considérer"):r<=1?(a=80,c="Prix dans la fourchette acceptable",l.push("Prix cohérent avec le budget"),l.push("Bon équilibre coût-bénéfice")):(a=Math.max(30,80-(r-1)*40),c="Prix supérieur au budget initial",l.push("Dépassement budgétaire"),r>1.3&&l.push("Prix potentiellement excessif"),o="Négociation recommandée"),{score:a,explanation:c,factors:l,recommendation:o}},q=n=>{let d=0;const t=[],i=n.rating/5*40;d+=i,t.push(`Note moyenne: ${n.rating}/5`);let s=0;n.completedProjects>=50?(s=30,t.push("Très expérimenté (50+ projets)")):n.completedProjects>=20?(s=25,t.push("Expérimenté (20+ projets)")):n.completedProjects>=5?(s=20,t.push("Expérience modérée (5+ projets)")):(s=10,t.push("Expérience limitée")),d+=s;const r=n.successRate*30;d+=r,t.push(`Taux de succès: ${(n.successRate*100).toFixed(0)}%`);const a=d>=80?"Prestataire de haute qualité":d>=60?"Prestataire fiable":"Profil à valider",c=d<60?"Demander des références supplémentaires":"";return{score:Math.round(d),explanation:a,factors:t,recommendation:c}},M=(n,d,t)=>{const i=[],s=d.filter(O=>n.some(se=>se.toLowerCase().includes(O.toLowerCase())||O.toLowerCase().includes(se.toLowerCase()))),r=s.length/d.length*70;i.push(`Compétences: ${s.length}/${d.length} correspondances`);const a=n.length-s.length,c=Math.min(20,a*2);a>0&&i.push(`${a} compétences supplémentaires`);const l=10;i.push("Localisation compatible");const o=r+c+l,h=o>=80?"Excellente correspondance":o>=60?"Bonne correspondance":"Correspondance partielle",C=o<60?"Vérifier les compétences manquantes":"";return{score:Math.round(o),explanation:h,factors:i,recommendation:C}},S=(n,d,t)=>{const i=[];let s=70;const r={low:30,medium:14,high:7}[d]||14;n<=r*.8?(s=95,i.push("Délai très rapide")):n<=r?(s=85,i.push("Délai adapté à l'urgence")):n<=r*1.5?(s=70,i.push("Délai acceptable")):(s=40,i.push("Délai potentiellement trop long")),t<=2?(s+=5,i.push("Très réactif")):t>24&&(s-=10,i.push("Temps de réponse lent"));const a=s>=80?"Délais excellents":s>=60?"Délais acceptables":"Délais préoccupants",c=s<60?"Négocier les délais":"";return{score:Math.max(0,Math.min(100,s)),explanation:a,factors:i,recommendation:c}},z=(n,d)=>{let t=0;const i=[];n.completedProjects<5?(t+=20,i.push("Expérience limitée")):n.completedProjects>=20&&(t-=10,i.push("Prestataire expérimenté")),n.successRate<.8?(t+=25,i.push("Taux d'échec élevé")):n.successRate>=.95&&(t-=15,i.push("Excellent historique")),d.complexity==="high"&&n.completedProjects<10&&(t+=20,i.push("Projet complexe vs expérience"));const s=Math.max(0,Math.min(100,100-t)),r=s>=80?"Risque faible":s>=60?"Risque modéré":"Risque élevé",a=s<60?"Prévoir un suivi renforcé":"";return{score:s,explanation:r,factors:i,recommendation:a}},V=(n,d,t)=>{let i=n.successRate*70;const s=[],r=t/d.budget;r<.6?(i-=20,s.push("Prix bas = risque d'abandon")):r>1.2&&(i-=10,s.push("Prix élevé = motivation")),n.completedProjects>=20&&(i+=15,s.push("Expérience rassurante")),d.complexity==="high"&&(i-=10,s.push("Projet complexe")),i=Math.max(10,Math.min(95,i));const a=i>=80?"Très probable":i>=60?"Probable":"Incertain",c=i<60?"Prévoir des jalons fréquents":"";return{score:Math.round(i),explanation:a,factors:s,recommendation:c}},G=(n,d)=>{let t=75;return d.completedProjects>=20?t+=15:d.completedProjects<5&&(t-=10),d.rating>=4.5?t+=10:d.rating<3.5&&(t-=15),Q(n.map(s=>s.score))<200&&(t+=5),Math.max(50,Math.min(95,t))},U=(n,d)=>{const t=[];return n.forEach(i=>{i.score<50&&t.push(`${W(i.criterion)}: Score critique (${i.score}%)`)}),d.price<d.mission.budget*.5&&t.push("Prix suspect - possible dumping"),d.provider.completedProjects<3&&t.push("Prestataire débutant - risque expérience"),t},Q=n=>{const d=n.reduce((t,i)=>t+i)/n.length;return n.reduce((t,i)=>t+Math.pow(i-d,2),0)/n.length},W=n=>({price:"Prix",quality:"Qualité",fit:"Adéquation",delay:"Délai",risk:"Risque",completionProbability:"Probabilité succès"})[n]||n,Z=n=>({price:pe,quality:me,fit:J,delay:ce,risk:ee,completionProbability:_})[n]||ne,L=n=>n>=80?"text-green-600 bg-green-100":n>=60?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100";return p.useEffect(()=>{P()},[m]),A?e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center",children:[e.jsx(B,{className:"w-6 h-6 mr-2 animate-pulse text-blue-600"}),"Analyse IA en cours..."]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),e.jsx("div",{className:"text-center text-gray-500",children:"Calcul des 6 critères de scoring..."})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j,{className:"border-2 border-blue-200",children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"w-6 h-6 mr-2 text-blue-600"}),"Score IA Multi-Objectif"]}),e.jsx(y,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:"v3.0 Advanced"})]})}),e.jsxs(v,{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"text-5xl font-bold text-blue-600 mb-2",children:[u,e.jsx("span",{className:"text-2xl",children:"/100"})]}),e.jsx("div",{className:"text-lg text-gray-600 mb-4",children:u>=80?"Excellent":u>=60?"Bon":"À améliorer"}),e.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ne,{className:"w-4 h-4 mr-1"}),"Confiance: ",x,"%"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ie,{className:"w-4 h-4 mr-1"}),"6 critères analysés"]})]})]}),e.jsx(D,{value:u,className:"h-3 mb-4"}),R.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(de,{className:"w-5 h-5 mr-2 text-red-600"}),e.jsx("span",{className:"font-medium text-red-800",children:"Facteurs de risque détectés"})]}),e.jsx("ul",{className:"space-y-1",children:R.map((n,d)=>e.jsxs("li",{className:"text-sm text-red-700 flex items-start",children:[e.jsx("span",{className:"mr-2",children:"•"}),n]},d))})]})]})]}),e.jsxs(xe,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(ue,{className:"grid w-full grid-cols-2",children:[e.jsx(X,{value:"overview",children:"Vue d'ensemble"}),e.jsx(X,{value:"details",children:"Analyse détaillée"})]}),e.jsx(Y,{value:"overview",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:T.map((n,d)=>{const t=Z(n.criterion);return e.jsx(j,{children:e.jsxs(v,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(t,{className:"w-5 h-5 mr-2 text-gray-600"}),e.jsx("span",{className:"font-medium",children:W(n.criterion)})]}),e.jsxs(y,{className:`${L(n.score)} border-none`,children:[n.score,"%"]})]}),e.jsx(D,{value:n.score,className:"h-2 mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:n.explanation})]})},d)})})}),e.jsx(Y,{value:"details",children:e.jsx("div",{className:"space-y-4",children:T.map((n,d)=>{const t=Z(n.criterion);return e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(t,{className:"w-5 h-5 mr-2"}),W(n.criterion),e.jsxs(y,{variant:"outline",className:"ml-2",children:["Poids: ",(n.weight*100).toFixed(0),"%"]})]}),e.jsxs(y,{className:`${L(n.score)} border-none`,children:[n.score,"/100"]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(D,{value:n.score,className:"h-2"}),e.jsx("p",{className:"text-gray-700",children:n.explanation}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-2",children:"Facteurs analysés:"}),e.jsx("ul",{className:"space-y-1",children:n.factors.map((i,s)=>e.jsxs("li",{className:"text-sm text-gray-600 flex items-start",children:[e.jsx(te,{className:"w-3 h-3 mr-2 mt-0.5 text-green-500"}),i]},s))})]}),n.recommendation&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ae,{className:"w-4 h-4 mr-2 mt-0.5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-blue-800",children:"Recommandation:"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:n.recommendation})]})]})})]})})]},d)})})})]})]})}function ye({missionId:m,bids:w,marketPrice:T,onSuspiciousActivityDetected:f}){const[u,E]=p.useState(null),[A,I]=p.useState(!1),[x,g]=p.useState(.6),[R,k]=p.useState([]),[P,F]=p.useState({}),q=async()=>{I(!0),await new Promise(c=>setTimeout(c,1500));const t=M(w,T),i=S(w),s=z(w),r=V(w,T),a={dumping:t,collusion:i,temporal:s,riskLevel:L(t,i),recommendations:n(t,i)};E(a),k(i.suspiciousGroups),F(r),I(!1),a.riskLevel==="high"&&f?.(a)},M=(t,i)=>{const s=[],r=[];return t.forEach(a=>{const c=a.price/i;if(c<x){const l=c<.4?"severe":c<.5?"moderate":"mild";s.push({bidId:a.id,providerId:a.providerId,price:a.price,marketPrice:i,ratio:c,severity:l,reasons:[`Prix ${((1-c)*100).toFixed(0)}% en dessous du marché`,l==="severe"?"Dumping critique détecté":"Prix potentiellement non viable"]})}c<.3&&r.push({bidId:a.id,providerId:a.providerId,concern:"Prix extrêmement bas - viabilité douteuse"})}),{detected:s.length>0,cases:s,suspiciousPrices:r,threshold:x,severity:s.some(a=>a.severity==="severe")?"high":s.some(a=>a.severity==="moderate")?"medium":"low"}},S=t=>{const i=[],s=[];return G(t,.05).forEach(a=>{if(a.bids.length>=3){const c=U(a.bids),l=Q(a.bids);let o=0;const h=[];c.simultaneousBids>=2&&(o+=30,h.push("Offres quasi-simultanées détectées")),l.priceVariance<.02&&(o+=25,h.push("Prix suspicieusement similaires")),l.coordinatedDecline&&(o+=35,h.push("Baisse coordonnée des prix")),o>=40&&i.push({providers:a.bids.map(C=>C.providerId),evidenceScore:o,patterns:h,affectedMissions:[m]})}}),{detected:i.length>0,suspiciousGroups:i,patterns:s,confidence:i.length>0?Math.max(...i.map(a=>a.evidenceScore)):0}},z=t=>{const i=[],s=[...t].sort((a,c)=>new Date(a.createdAt).getTime()-new Date(c.createdAt).getTime());for(let a=1;a<s.length;a++){const c=new Date(s[a].createdAt).getTime()-new Date(s[a-1].createdAt).getTime();i.push(c/(1e3*60))}return{averageInterval:i.length>0?i.reduce((a,c)=>a+c,0)/i.length:0,suspiciouslyFast:i.filter(a=>a<5).length,clusteredBids:W(s),patterns:[]}},V=(t,i)=>{const s=t.map(h=>h.price),r=s.reduce((h,C)=>h+C,0)/s.length,a=Math.min(...s),l=(Math.max(...s)-a)/r,o=Math.abs(r-i)/i;return{averagePrice:r,priceSpread:l,marketDeviation:o,competitionLevel:t.length>10?"high":t.length>5?"medium":"low",volatility:Z(s)}},G=(t,i)=>{const s=[],r=new Set;return t.forEach(a=>{if(r.has(a.id))return;const c={averagePrice:a.price,bids:[a]};t.forEach(l=>{l.id!==a.id&&!r.has(l.id)&&Math.abs(a.price-l.price)/Math.max(a.price,l.price)<=i&&c.bids.push(l)}),c.bids.forEach(l=>r.add(l.id)),c.bids.length>1&&s.push(c)}),s},U=t=>{const i=t.map(r=>new Date(r.createdAt).getTime());return{simultaneousBids:i.filter((r,a)=>i.some((c,l)=>a!==l&&Math.abs(r-c)<1800*1e3)).length}},Q=t=>{const i=t.map(o=>o.price),s=i.reduce((o,h)=>o+h,0)/i.length,a=i.reduce((o,h)=>o+Math.pow(h-s,2),0)/i.length/(s*s),c=[...t].sort((o,h)=>new Date(o.createdAt).getTime()-new Date(h.createdAt).getTime());let l=!1;if(c.length>=3){const o=[];for(let h=1;h<c.length;h++)o.push(c[h].price-c[h-1].price);l=o.filter(h=>h<0).length>=o.length*.7}return{priceVariance:a,coordinatedDecline:l}},W=t=>{const i=[];let s=[];return t.forEach((r,a)=>{if(a===0){s=[r];return}new Date(r.createdAt).getTime()-new Date(t[a-1].createdAt).getTime()<600*1e3?s.push(r):(s.length>=2&&i.push(s),s=[r])}),s.length>=2&&i.push(s),i},Z=t=>{if(t.length<2)return 0;const i=t.reduce((r,a)=>r+a,0)/t.length,s=t.reduce((r,a)=>r+Math.pow(a-i,2),0)/t.length;return Math.sqrt(s)/i},L=(t,i)=>t.severity==="high"||i.confidence>70?"high":t.severity==="medium"||i.confidence>40?"medium":"low",n=(t,i)=>{const s=[];return t.detected&&(s.push("Vérifier la viabilité des offres à prix très bas"),s.push("Demander une justification détaillée des coûts")),i.detected&&(s.push("Enquête approfondie sur les prestataires suspects"),s.push("Vérifier les liens entre les entreprises")),s};p.useEffect(()=>{w.length>0&&q()},[w,T]);const d=t=>{switch(t){case"high":return"text-red-600 bg-red-100 border-red-200";case"medium":return"text-yellow-600 bg-yellow-100 border-yellow-200";case"low":return"text-green-600 bg-green-100 border-green-200";default:return"text-gray-600 bg-gray-100 border-gray-200"}};return A?e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center",children:[e.jsx(ee,{className:"w-6 h-6 mr-2 animate-pulse text-red-600"}),"Analyse Anti-Dumping en cours..."]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"animate-pulse h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"animate-pulse h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"text-center text-gray-500",children:"Détection de patterns suspects..."})]})})]}):u?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j,{className:`border-2 ${d(u.riskLevel)}`,children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ee,{className:"w-6 h-6 mr-2"}),"Système Anti-Dumping & Anti-Collusion"]}),e.jsxs(y,{className:d(u.riskLevel),children:["Risque ",u.riskLevel]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:u.dumping.cases.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Cas de dumping"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:u.collusion.suspiciousGroups.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Groupes suspects"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:P.competitionLevel||"N/A"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Niveau concurrence"})]})]})})]}),u.dumping.detected&&e.jsxs(le,{className:"border-red-200 bg-red-50",children:[e.jsx(de,{className:"h-4 w-4 text-red-600"}),e.jsxs(oe,{children:[e.jsxs("div",{className:"font-medium text-red-800 mb-2",children:["Dumping détecté sur ",u.dumping.cases.length," offre(s)"]}),e.jsx("div",{className:"space-y-2",children:u.dumping.cases.slice(0,3).map((t,i)=>e.jsxs("div",{className:"text-sm text-red-700",children:["• Offre ",t.bidId,": ",t.price,"€ (",(t.ratio*100).toFixed(0),"% du marché)"]},i))})]})]}),u.collusion.detected&&e.jsxs(le,{className:"border-orange-200 bg-orange-50",children:[e.jsx(ge,{className:"h-4 w-4 text-orange-600"}),e.jsxs(oe,{children:[e.jsx("div",{className:"font-medium text-orange-800 mb-2",children:"Collusion potentielle détectée"}),e.jsx("div",{className:"space-y-2",children:u.collusion.suspiciousGroups.map((t,i)=>e.jsxs("div",{className:"text-sm text-orange-700",children:["• Groupe de ",t.providers.length," prestataires (confiance: ",t.evidenceScore,"%)"]},i))})]})]}),u.dumping.detected&&e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center",children:[e.jsx(ve,{className:"w-5 w-5 mr-2 text-red-600"}),"Analyse Dumping"]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Seuil de dumping:"}),e.jsxs(y,{variant:"outline",children:[(x*100).toFixed(0),"% du prix marché"]})]}),e.jsx("div",{className:"space-y-3",children:u.dumping.cases.map((t,i)=>e.jsxs("div",{className:"border rounded-lg p-3 bg-red-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-medium",children:["Offre ",t.bidId]}),e.jsx(y,{className:`${t.severity==="severe"?"bg-red-600":t.severity==="moderate"?"bg-orange-500":"bg-yellow-500"} text-white`,children:t.severity})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:["Prix: ",t.price,"€ (marché: ",t.marketPrice,"€)"]}),e.jsxs("div",{children:["Ratio: ",(t.ratio*100).toFixed(1),"%"]}),e.jsx("ul",{className:"mt-2 space-y-1",children:t.reasons.map((s,r)=>e.jsxs("li",{className:"text-red-700",children:["• ",s]},r))})]})]},i))})]})})]}),u.collusion.detected&&e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center",children:[e.jsx(fe,{className:"w-5 h-5 mr-2 text-orange-600"}),"Analyse Collusion"]})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-4",children:u.collusion.suspiciousGroups.map((t,i)=>e.jsxs("div",{className:"border rounded-lg p-4 bg-orange-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"font-medium",children:["Groupe suspect #",i+1]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(y,{variant:"outline",children:[t.providers.length," prestataires"]}),e.jsxs(y,{className:"bg-orange-600 text-white",children:[t.evidenceScore,"% confiance"]})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-sm",children:"Patterns détectés:"}),e.jsx("ul",{className:"mt-1 space-y-1",children:t.patterns.map((s,r)=>e.jsxs("li",{className:"text-sm text-orange-700",children:["• ",s]},r))})]})}),e.jsx(D,{value:t.evidenceScore,className:"mt-3"})]},i))})})]}),u.recommendations.length>0&&e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center",children:[e.jsx(B,{className:"w-5 h-5 mr-2 text-blue-600"}),"Recommandations IA"]})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-2",children:u.recommendations.map((t,i)=>e.jsxs("div",{className:"flex items-start",children:[e.jsx(te,{className:"w-4 h-4 mr-2 mt-0.5 text-blue-600"}),e.jsx("span",{className:"text-sm",children:t})]},i))})})]}),e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center",children:[e.jsx(ie,{className:"w-5 h-5 mr-2 text-gray-600"}),"Métriques du Marché"]})}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[P.averagePrice?.toFixed(0),"€"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Prix moyen"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[(P.priceSpread*100).toFixed(0),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Écart prix"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[(P.volatility*100).toFixed(0),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Volatilité"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:w.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Offres totales"})]})]})})]})]}):null}function we({mission:m,providerProfile:w,existingBids:T,onBidRecommendation:f}){const[u,E]=p.useState([]),[A,I]=p.useState(null),[x,g]=p.useState(null),[R,k]=p.useState(0),[P,F]=p.useState(!1),[q,M]=p.useState([]),[S,z]=p.useState(0),V=async()=>{F(!0),await new Promise(c=>setTimeout(c,1500));const s=G(T,m),a=[U(s,m,w),Q(s,m,w),W(s,m,w),Z(s,m,w)].sort((c,l)=>l.winProbability-c.winProbability);E(a),g(s),I(a[0]),k(a[0].suggestedPrice),F(!1),f?.(a[0])},G=(s,r)=>{const a=s.map($=>$.price).filter($=>$>0);if(a.length===0)return{averagePrice:r.budget*.85,priceRange:{min:r.budget*.7,max:r.budget*.95},competitionLevel:"low",marketTrend:"stable",optimalTimeToSubmit:"Immédiat - pas de concurrence",keyCompetitors:0};const c=a.reduce(($,he)=>$+he,0)/a.length,l=Math.min(...a),o=Math.max(...a),h=s.length>10?"high":s.length>5?"medium":"low",C=s.slice(-3).map($=>$.price);let O="stable";if(C.length>=2){const $=C[C.length-1]-C[0];O=$>c*.05?"increasing":$<-c*.05?"decreasing":"stable"}const K=(new Date(r.deadline).getTime()-Date.now())/(1e3*60*60);let H="";return K>48?H="Attendre 24-48h pour observer la concurrence":K>24?H="Moment optimal - soumettez maintenant":H="Urgent - soumettez immédiatement",{averagePrice:c,priceRange:{min:l,max:o},competitionLevel:h,marketTrend:O,optimalTimeToSubmit:H,keyCompetitors:s.length}},U=(s,r,a)=>{const c=s.priceRange.min,l=Math.max(c*.95,r.budget*.6),o=L(l,s,a,"aggressive");return{strategy:"aggressive",suggestedPrice:l,winProbability:o,reasoning:[`Prix 5% en dessous du plus bas (${c}€)`,"Objectif: remporter à tout prix","Marge réduite mais volume élevé"],pros:["Très haute probabilité de gain","Décroche rapidement le projet","Écarte la concurrence"],cons:["Marge très faible voire négative","Risque de perte financière","Image de dumping possible"],marketPosition:"Leader prix"}},Q=(s,r,a)=>{const c=s.averagePrice,l=c*.92,o=L(l,s,a,"competitive");return{strategy:"competitive",suggestedPrice:l,winProbability:o,reasoning:[`Prix 8% en dessous de la moyenne (${c.toFixed(0)}€)`,"Équilibre entre compétitivité et rentabilité","Position forte sur le marché"],pros:["Bon équilibre prix/qualité","Probabilité de gain élevée","Marge acceptable"],cons:["Concurrence possible","Pas le prix le plus bas","Requiert une différenciation"],marketPosition:"Compétitif"}},W=(s,r,a)=>{const c=s.averagePrice,l=Math.min(c*1.15,r.budget*.95),o=L(l,s,a,"premium");return{strategy:"premium",suggestedPrice:l,winProbability:o,reasoning:["Prix premium basé sur la qualité","Mise sur l'expertise et l'expérience","Positionnement haut de gamme"],pros:["Marge élevée","Positionnement qualité","Clients valorisant l'expertise"],cons:["Probabilité de gain plus faible","Concurrence des prix bas","Justification nécessaire"],marketPosition:"Premium"}},Z=(s,r,a)=>{const l=s.averagePrice*.88,o=L(l,s,a,"value");return{strategy:"value",suggestedPrice:l,winProbability:o,reasoning:["Meilleur rapport qualité-prix","Prix attractif avec qualité garantie","Positionnement intelligent"],pros:["Excellent positionnement","Attire les clients rationnels","Marge raisonnable"],cons:["Nécessite une communication claire","Concurrence sur les deux fronts","Doit prouver la valeur"],marketPosition:"Valeur"}},L=(s,r,a,c)=>{let l=50;const o=(r.priceRange.max-s)/(r.priceRange.max-r.priceRange.min);l+=o*30;const h=a.rating/5*15+a.successRate*10;l+=h;const C={low:0,medium:-5,high:-15}[r.competitionLevel];l+=C;const O={aggressive:20,competitive:10,value:5,premium:-10}[c]||0;return l+=O,Math.max(5,Math.min(95,l))},n=(s,r)=>{const a=[],c=s/r.averagePrice;return c<.7&&a.push("⚠️ Prix très agressif - vérifiez votre rentabilité"),c>1.2&&a.push("💡 Prix élevé - mettez en avant votre expertise"),r.competitionLevel==="high"&&a.push("🎯 Forte concurrence - différenciez-vous par la qualité"),r.marketTrend==="decreasing"&&a.push("📉 Tendance baissière - attendez ou soyez plus agressif"),new Date(m.deadline).getTime()-Date.now()<1440*60*1e3&&a.push("⏰ Deadline proche - soumettez rapidement"),a},d=s=>{if(!x)return;const r=L(s,x,w,"custom");z(r);const a=n(s,x);M(a)};p.useEffect(()=>{V()},[m.id,T]),p.useEffect(()=>{R>0&&x&&d(R)},[R,x]);const t=s=>({aggressive:"bg-red-100 text-red-800 border-red-200",competitive:"bg-blue-100 text-blue-800 border-blue-200",premium:"bg-purple-100 text-purple-800 border-purple-200",value:"bg-green-100 text-green-800 border-green-200"})[s]||"bg-gray-100 text-gray-800",i=s=>({aggressive:_,competitive:J,premium:ee,value:te})[s]||J;return P?e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center",children:[e.jsx(B,{className:"w-6 h-6 mr-2 animate-pulse text-blue-600"}),"Analyse du marché en cours..."]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}),e.jsx("div",{className:"text-center text-gray-500",children:"Génération des stratégies optimales..."})]})})]}):e.jsxs("div",{className:"space-y-6",children:[x&&e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center",children:[e.jsx(ie,{className:"w-5 h-5 mr-2 text-blue-600"}),"Intelligence du Marché"]})}),e.jsxs(v,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[x.averagePrice.toFixed(0),"€"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Prix moyen"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:x.keyCompetitors}),e.jsx("div",{className:"text-sm text-gray-600",children:"Concurrents"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(y,{className:`text-xs ${x.competitionLevel==="high"?"bg-red-100 text-red-800":x.competitionLevel==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:x.competitionLevel}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Concurrence"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium",children:x.marketTrend==="increasing"?"📈":x.marketTrend==="decreasing"?"📉":"➡️"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Tendance"})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ce,{className:"w-4 h-4 mr-2 mt-0.5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-blue-800",children:"Moment optimal:"}),e.jsx("p",{className:"text-sm text-blue-700",children:x.optimalTimeToSubmit})]})]})})]})]}),e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center",children:[e.jsx(ae,{className:"w-5 h-5 mr-2 text-yellow-600"}),"Simulateur de Prix en Temps Réel"]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Votre prix (€)"}),e.jsx(je,{type:"number",value:R,onChange:s=>k(Number(s.target.value)),placeholder:"Entrez votre prix",className:"text-lg font-semibold"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Probabilité de gain:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{value:S,className:"w-32"}),e.jsxs(y,{className:`${S>70?"bg-green-100 text-green-800":S>50?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[S.toFixed(0),"%"]})]})]}),q.length>0&&e.jsx("div",{className:"space-y-2",children:q.map((s,r)=>e.jsxs(le,{className:"border-yellow-200 bg-yellow-50",children:[e.jsx(Ne,{className:"h-4 w-4 text-yellow-600"}),e.jsx(oe,{className:"text-yellow-800",children:s})]},r))})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map((s,r)=>{const a=i(s.strategy),c=A?.strategy===s.strategy;return e.jsxs(j,{className:`cursor-pointer transition-all ${c?"border-2 border-blue-500 shadow-lg":"hover:shadow-md"}`,onClick:()=>{I(s),k(s.suggestedPrice)},children:[e.jsx(N,{className:"pb-3",children:e.jsxs(b,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(a,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"capitalize",children:s.strategy})]}),e.jsxs(y,{className:t(s.strategy),children:[s.winProbability.toFixed(0),"% succès"]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[s.suggestedPrice.toFixed(0),"€"]}),e.jsx("div",{className:"text-sm text-gray-600",children:s.marketPosition})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-1",children:"Raisons:"}),e.jsx("ul",{className:"text-xs space-y-1",children:s.reasoning.slice(0,2).map((l,o)=>e.jsxs("li",{className:"text-gray-600",children:["• ",l]},o))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-green-600",children:"Pros:"}),e.jsx("ul",{className:"mt-1 space-y-1",children:s.pros.slice(0,2).map((l,o)=>e.jsxs("li",{className:"text-green-600",children:["+ ",l]},o))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-red-600",children:"Cons:"}),e.jsx("ul",{className:"mt-1 space-y-1",children:s.cons.slice(0,2).map((l,o)=>e.jsxs("li",{className:"text-red-600",children:["- ",l]},o))})]})]}),c&&e.jsx(re,{className:"w-full mt-3",onClick:()=>f?.(s),children:"Utiliser cette stratégie"})]})})]},r)})})]})}function Pe({userId:m,context:w}){const[T,f]=p.useState([]),[u,E]=p.useState(!0),A=()=>{const g={skills:["React","Node.js","TypeScript"],rating:4.2,completedProjects:15,responseTime:2.5,successRate:.85},R={demandingSkills:["React","Vue.js","Python","AI/ML","Blockchain"]},P=(M=>{let S=0;const z=M.skills.filter(Q=>R.demandingSkills.includes(Q)).length/R.demandingSkills.length;S+=z*.4;const V=M.rating/5*M.successRate;S+=V*.3;const G=Math.max(0,1-M.responseTime/24);S+=G*.2;const U=Math.min(1,M.completedProjects/50);return S+=U*.1,Math.round(S*100)})(g),q=[{id:"1",type:"optimization",title:"Optimisez votre profil technique",description:`Score actuel: ${P}%. Ajoutez Python et AI/ML pour atteindre 95%`,impact:P<70?"high":P<85?"medium":"low",reasoning:[`Profil technique à ${P}%`,"Python demandé dans 65% des nouveaux projets","AI/ML: croissance de +120% cette année","Impact estimé: +€800/mois de revenus"],actionable:!0,confidence:94,metrics:{currentScore:P,potentialIncrease:"+15%",timeToImplement:"2 semaines"}},{id:"2",type:"market",title:"Opportunité de marché détectée",description:"Pic de demande en développement e-commerce (+45% cette semaine)",impact:"high",reasoning:["Analyse de 250+ projets récents","Budget moyen en hausse de 23%","Compétition réduite de 18%","Vos compétences matchent à 87%"],actionable:!0,confidence:89,metrics:{demandIncrease:"+45%",avgBudgetIncrease:"+23%",matchScore:"87%"}},{id:"3",type:"pricing",title:"Stratégie de prix optimisée",description:"Augmentez vos tarifs de 15% basé sur votre performance",impact:"medium",reasoning:["Performance supérieure à 78% des prestataires","Taux de satisfaction de 96%","Délais respectés dans 92% des cas","Market positioning favorable"],actionable:!0,confidence:76,metrics:{currentRate:"45€/h",recommendedRate:"52€/h",increaseJustification:"+15%"}},{id:"4",type:"networking",title:"Réseau et partenariats",description:"Connectez-vous avec 3 prestataires complémentaires identifiés",impact:"medium",reasoning:["Projets nécessitant équipes multidisciplinaires: +30%","3 profils complémentaires identifiés dans votre zone","Potentiel de projets collaboratifs élevé"],actionable:!0,confidence:71,metrics:{potentialPartners:3,collaborativeProjects:"+30%",networkScore:"Faible"}}].sort((M,S)=>{const z={high:3,medium:2,low:1},V=z[M.impact]*(M.confidence/100);return z[S.impact]*(S.confidence/100)-V});f(q)};p.useEffect(()=>{A()},[m,w]);const I=g=>{switch(g){case"high":return"text-red-500";case"medium":return"text-orange-500";case"low":return"text-green-500";default:return"text-gray-500"}},x=g=>{switch(g){case"high":return _;case"medium":return J;case"low":return me;default:return ae}};return u?e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5 animate-pulse text-blue-500"}),"IA en cours d'analyse..."]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"animate-pulse h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"animate-pulse h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"animate-pulse h-4 bg-gray-200 rounded w-1/2"})]})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(B,{className:"h-5 w-5 text-blue-500"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Recommandations IA"}),e.jsx(y,{variant:"secondary",children:"Beta"})]}),T.map(g=>{const R=x(g.potentialImpact);return e.jsxs(j,{className:"border-l-4 border-l-blue-500",children:[e.jsx(N,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:`h-4 w-4 ${I(g.potentialImpact)}`}),e.jsx(b,{className:"text-base",children:g.title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Confiance:"}),e.jsxs(y,{variant:g.confidence>90?"default":"secondary",children:[g.confidence,"%"]})]})]})}),e.jsxs(v,{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-700",children:g.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Niveau de confiance"}),e.jsxs("span",{children:[g.confidence,"%"]})]}),e.jsx(D,{value:g.confidence,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"font-medium text-sm",children:"Analyse:"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:g.reasoning.map((k,P)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full"}),k]},P))})]}),g.actionable&&e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(re,{size:"sm",children:"Appliquer"}),e.jsx(re,{variant:"outline",size:"sm",children:"En savoir plus"})]})]})]},g.id)})]})}function Se({metrics:m={totalAnalyses:1247,successRate:87,avgMatchScore:84,revenueOptimization:23,timesSaved:156,recommendationsAccepted:73}}){const w=[{title:"Analyses IA",value:m.totalAnalyses.toLocaleString(),icon:B,color:"blue",description:"Total d'analyses effectuées"},{title:"Taux de succès",value:`${m.successRate}%`,icon:J,color:"green",description:"Précision des recommandations"},{title:"Score moyen",value:`${m.avgMatchScore}%`,icon:me,color:"yellow",description:"Qualité du matching"},{title:"Optimisation revenus",value:`+${m.revenueOptimization}%`,icon:_,color:"purple",description:"Amélioration moyenne"}],T=[{type:"analysis",title:"Analyse de mission: Développement e-commerce",score:92,time:"Il y a 2h",status:"success"},{type:"recommendation",title:"Recommandation de prix acceptée",improvement:"+15%",time:"Il y a 4h",status:"accepted"},{type:"match",title:"Nouveau match détecté",relevance:89,time:"Il y a 6h",status:"new"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:w.map((f,u)=>{const E=f.icon;return e.jsxs(j,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(N,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(b,{className:"text-sm font-medium text-gray-600",children:f.title}),e.jsx(E,{className:`h-4 w-4 text-${f.color}-600`})]}),e.jsxs(v,{children:[e.jsx("div",{className:"text-2xl font-bold",children:f.value}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.description})]})]},u)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Performance IA"})]})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Précision des analyses"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[m.successRate,"%"]})]}),e.jsx(D,{value:m.successRate,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Qualité du matching"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[m.avgMatchScore,"%"]})]}),e.jsx(D,{value:m.avgMatchScore,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Adoption des recommandations"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[m.recommendationsAccepted,"%"]})]}),e.jsx(D,{value:m.recommendationsAccepted,className:"h-2"})]})]})]}),e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center space-x-2",children:[e.jsx(ce,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{children:"Activité récente"})]})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-3",children:T.map((f,u)=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:f.title}),e.jsx("p",{className:"text-xs text-gray-500",children:f.time})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[f.score&&e.jsxs(y,{variant:"secondary",children:[f.score,"%"]}),f.improvement&&e.jsx(y,{variant:"default",className:"bg-green-100 text-green-800",children:f.improvement}),f.relevance&&e.jsxs(y,{variant:"outline",children:[f.relevance,"%"]})]})]},u))})})]})]}),e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center space-x-2",children:[e.jsx(ie,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{children:"Statistiques rapides"})]})}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[m.timesSaved,"h"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Temps économisé"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["+",m.revenueOptimization,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Revenus optimisés"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[m.recommendationsAccepted,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Recommandations suivies"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[m.avgMatchScore,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Score de matching"})]})]})})]})]})}function ze(){const[m,w]=p.useState({}),[T,f]=p.useState(!0),[u,E]=p.useState("7d"),[A]=p.useState({bids:[{id:"1",providerId:"provider-1",providerName:"Tech Solutions",price:2800,timeline:14,createdAt:new Date(Date.now()-7200*1e3).toISOString(),provider:{id:"provider-1",name:"Tech Solutions",rating:4.8,completedProjects:45,successRate:.92,responseTime:2,skills:["React","Node.js","TypeScript","PostgreSQL"],location:"Paris"},mission:{budget:3500,complexity:"medium",urgency:"medium",requiredSkills:["React","Node.js","API"],category:"développement-web"}},{id:"2",providerId:"provider-2",providerName:"Digital Experts",price:1800,timeline:10,createdAt:new Date(Date.now()-14400*1e3).toISOString(),provider:{id:"provider-2",name:"Digital Experts",rating:4.2,completedProjects:12,successRate:.78,responseTime:8,skills:["React","Vue.js","CSS"],location:"Lyon"},mission:{budget:3500,complexity:"medium",urgency:"medium",requiredSkills:["React","Node.js","API"],category:"développement-web"}}],mission:{id:"mission-1",title:"Développement d'une application e-commerce",budget:3500,category:"développement-web",complexity:"medium",urgency:"medium",deadline:new Date(Date.now()+10080*60*1e3),requiredSkills:["React","Node.js","API","PostgreSQL"]},providerProfile:{id:"current-provider",rating:4.5,completedProjects:25,successRate:.88,skills:["React","Node.js","TypeScript","MongoDB"],hourlyRate:65},marketPrice:3e3});p.useEffect(()=>{(async()=>{f(!0),await new Promise(g=>setTimeout(g,1e3)),w({totalAnalyses:1247,successfulPredictions:89.6,detectedAbuseAttempts:23,averageScoreAccuracy:94.2,activeModels:6,processingSpeed:.3,lastModelUpdate:"2024-01-15T10:30:00Z",systemHealth:98.7}),f(!1)})()},[u]);const I=({title:x,value:g,unit:R,icon:k,trend:P,trendValue:F,color:q="blue"})=>{const M={blue:"text-blue-600",green:"text-green-600",red:"text-red-600",purple:"text-purple-600",orange:"text-orange-600"},S={blue:"text-blue-500",green:"text-green-500",red:"text-red-500",purple:"text-purple-500",orange:"text-orange-500"};return e.jsx(j,{children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:x}),e.jsxs("p",{className:`text-2xl font-bold ${M[q]||M.blue}`,children:[g,R]}),P&&e.jsxs("div",{className:`flex items-center mt-1 text-sm ${P==="up"?"text-green-600":"text-red-600"}`,children:[e.jsx(_,{className:`w-3 h-3 mr-1 ${P==="down"?"rotate-180":""}`}),F]})]}),e.jsx(k,{className:`w-8 h-8 ${S[q]||S.blue}`})]})})})};return T?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsxs("h1",{className:"text-4xl font-bold text-gray-900 mb-4 flex items-center justify-center",children:[e.jsx(B,{className:"w-10 h-10 mr-3 text-blue-600 animate-pulse"}),"Tableau de Bord IA"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(x=>e.jsx(j,{children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})})},x))})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-4xl font-bold text-gray-900 mb-4 flex items-center justify-center",children:[e.jsx(B,{className:"w-10 h-10 mr-3 text-blue-600"}),"Tableau de Bord IA"]}),e.jsx("p",{className:"text-xl text-gray-600",children:"Monitoring et contrôle de tous les systèmes d'intelligence artificielle"}),e.jsx("div",{className:"flex justify-center space-x-2 mt-4",children:["24h","7d","30d"].map(x=>e.jsx(re,{variant:u===x?"default":"outline",size:"sm",onClick:()=>E(x),children:x},x))})]}),e.jsx("div",{className:"mb-8",children:e.jsx(Se,{})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(I,{title:"Analyses Totales",value:m.totalAnalyses,unit:"",icon:ne,trend:"up",trendValue:"+12.5%",color:"blue"}),e.jsx(I,{title:"Précision Prédictions",value:m.successfulPredictions,unit:"%",icon:J,trend:"up",trendValue:"+2.1%",color:"green"}),e.jsx(I,{title:"Abus Détectés",value:m.detectedAbuseAttempts,unit:"",icon:ee,trend:"down",trendValue:"-8.3%",color:"red"}),e.jsx(I,{title:"Santé Système",value:m.systemHealth,unit:"%",icon:te,trend:"up",trendValue:"+0.5%",color:"green"})]}),e.jsxs(j,{className:"mb-8",children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center",children:[e.jsx(ie,{className:"w-5 w-5 mr-2"}),"Statut des Modèles IA"]})}),e.jsxs(v,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Scoring Multi-Objectif"}),e.jsx(y,{className:"bg-green-100 text-green-800",children:"Actif"})]}),e.jsx(D,{value:94,className:"h-2"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Précision: 94%"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Anti-Dumping"}),e.jsx(y,{className:"bg-green-100 text-green-800",children:"Actif"})]}),e.jsx(D,{value:98,className:"h-2"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Détection: 98%"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Guidage Enchères"}),e.jsx(y,{className:"bg-green-100 text-green-800",children:"Actif"})]}),e.jsx(D,{value:91,className:"h-2"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Succès: 91%"})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m.activeModels}),e.jsx("div",{className:"text-sm text-gray-600",children:"Modèles actifs"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[m.processingSpeed,"s"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Temps moyen"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:new Date(m.lastModelUpdate).toLocaleDateString()}),e.jsx("div",{className:"text-sm text-gray-600",children:"Dernière MAJ"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"99.9%"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Disponibilité"})]})]})]})]}),e.jsxs(xe,{defaultValue:"scoring",className:"space-y-6",children:[e.jsxs(ue,{className:"grid w-full grid-cols-4",children:[e.jsx(X,{value:"scoring",children:"Scoring Avancé"}),e.jsx(X,{value:"anti-dumping",children:"Anti-Dumping"}),e.jsx(X,{value:"bidding",children:"Guidage Enchères"}),e.jsx(X,{value:"recommendations",children:"Recommandations"})]}),e.jsx(Y,{value:"scoring",children:e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center",children:[e.jsx(J,{className:"w-5 h-5 mr-2 text-green-600"}),"Moteur de Scoring Multi-Objectif"]})}),e.jsx(v,{children:e.jsx(be,{bidData:{price:A.bids[0].price,timeline:A.bids[0].timeline,provider:A.bids[0].provider,mission:A.bids[0].mission},onScoreCalculated:(x,g)=>{console.log("Score calculé:",x,g)}})})]})}),e.jsx(Y,{value:"anti-dumping",children:e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center",children:[e.jsx(ee,{className:"w-5 h-5 mr-2 text-red-600"}),"Système Anti-Dumping & Détection de Collusion"]})}),e.jsx(v,{children:e.jsx(ye,{missionId:A.mission.id,bids:A.bids,marketPrice:A.marketPrice,onSuspiciousActivityDetected:x=>{console.log("Activité suspecte détectée:",x)}})})]})}),e.jsx(Y,{value:"bidding",children:e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center",children:[e.jsx(ae,{className:"w-5 h-5 mr-2 text-yellow-600"}),"Guidage d'Enchères Intelligent"]})}),e.jsx(v,{children:e.jsx(we,{mission:A.mission,providerProfile:A.providerProfile,existingBids:A.bids,onBidRecommendation:x=>{console.log("Recommandation d'enchère:",x)}})})]})}),e.jsx(Y,{value:"recommendations",children:e.jsxs(j,{children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center",children:[e.jsx(B,{className:"w-5 h-5 mr-2 text-blue-600"}),"Moteur de Recommandations Avancées"]})}),e.jsx(v,{children:e.jsx(Pe,{userId:"current-user",context:"dashboard"})})]})})]}),e.jsxs(j,{className:"mt-8",children:[e.jsx(N,{children:e.jsxs(b,{className:"flex items-center",children:[e.jsx(de,{className:"w-5 h-5 mr-2 text-orange-600"}),"Alertes IA en Temps Réel"]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ce,{className:"w-4 h-4 mr-2 text-yellow-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Pic d'activité détecté"})]}),e.jsx(y,{variant:"outline",className:"text-yellow-700",children:"Nouveau"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"w-4 h-4 mr-2 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Nouvelle tendance marché identifiée"})]}),e.jsx(y,{variant:"outline",className:"text-blue-700",children:"Info"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(te,{className:"w-4 h-4 mr-2 text-green-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Modèle de scoring mis à jour avec succès"})]}),e.jsx(y,{variant:"outline",className:"text-green-700",children:"Succès"})]})]})})]})]})})}export{ze as default};
